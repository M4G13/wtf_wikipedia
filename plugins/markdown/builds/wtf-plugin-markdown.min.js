!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).wtfPerson=e()}(this,(function(){"use strict";const t={redirects:!0,infoboxes:!0,templates:!0,sections:!0};var e=function(e){let n=this,a="";return!0===(e=Object.assign({},t,e)).redirects&&!0===this.isRedirect()?function(t){let e=t.redirectTo(),n=e.page;return n="./"+n.replace(/ /g,"_"),e.anchor&&(n+="#"+e.anchor),`↳ [${e.text}](${n})`}(this):(!0===e.infoboxes&&!0===e.templates&&(a+=this.infoboxes().map((t=>t.markdown(e))).join("\n\n")),!0!==e.sections&&!0!==e.paragraphs&&!0!==e.sentences||(a+=n.sections().map((t=>t.markdown(e))).join("\n\n")),!0===e.references&&(a+="## References",a+=this.citations().map((t=>t.json(e))).join("\n")),a)};const n={headers:!0,images:!0,tables:!0,lists:!0,paragraphs:!0};var a=function(t){let e="";if(!0===(t=Object.assign({},n,t)).headers&&this.title()){let t="##";for(let e=0;e<this.depth();e+=1)t+="#";e+=t+" "+this.title()+"\n"}if(!0===t.images){let t=this.images();t.length>0&&(e+=t.map((t=>t.markdown())).join("\n"),e+="\n")}if(!0===t.tables){let n=this.tables();n.length>0&&(e+="\n",e+=n.map((e=>e.markdown(t))).join("\n"),e+="\n")}if(!0===t.lists){let n=this.lists();n.length>0&&(e+=n.map((e=>e.markdown(t))).join("\n"),e+="\n")}return!0!==t.paragraphs&&!0!==t.sentences||(e+=this.paragraphs().map((e=>e.sentences().map((e=>e.markdown(t))).join(" "))).join("\n\n")),e};const i={sentences:!0};var r=function(t){let e="";return!0===(t=Object.assign({},i,t)).sentences&&(e+=this.sentences().reduce(((e,n)=>e+=n.markdown(t)+"\n"),{})),e};var s=function(t,e,n){if(!e||!t)return t;"number"==typeof t&&(t=String(t)),e=e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");let a=new RegExp("\\b"+e+"\\b");return t=!0===a.test(t)?t.replace(a,n):t.replace(e,n)};const o={links:!0,formatting:!0};var l=function(t){t=Object.assign({},o,t);let e=this.text();return!0===t.links&&this.links().forEach((t=>{let n=t.markdown(),a=t.text()||t.page();e=s(e,a,n)})),!0===t.formatting&&(this.bolds().forEach((t=>{e=s(e,t,"**"+t+"**")})),this.italics().forEach((t=>{e=s(e,t,"*"+t+"*")}))),e};var c=function(){let t=this.href();return t=t.replace(/ /g,"_"),"["+(this.text()||this.page())+"]("+t+")"};var h=function(){let t=this.data.file.replace(/^(file|image):/i,"");return t=t.replace(/\.(jpg|jpeg|png|gif|svg)/i,""),"!["+t+"]("+this.thumbnail()+")"};var p=(t,e)=>{t=t||"";let n=(e=e||15)-(t=String(t)).length;n=Math.ceil(n/2);for(let a=0;a<n;a+=1)(t=" "+t).length<e&&(t+=" ");return t};const d={image:!0,caption:!0,alt:!0,signature:!0,"signature alt":!0},f={images:!0};var m=function(t){t=Object.assign({},f,t);let e="|"+p("",35)+"|"+p("",30)+"|\n";return e+="|"+p("---",35)+"|"+p("---",30)+"|\n",Object.keys(this.data).forEach((n=>{if(!0===d[n])return;let a="**"+n+"**",i=this.data[n].markdown(t);i=i.split(/\n/g).join(", "),e+="|"+p(a,35)+"|"+p(i,30)+" |\n"})),e};var u=function(t){return this.lines().map((e=>" * "+e.markdown(t))).join("\n")};var g=function(){if(this.data&&this.data.url&&this.data.title)return`⌃ [${this.data.title}](${this.data.url})`;if(this.data.encyclopedia)return"⌃ "+this.data.encyclopedia;if(this.data.title){let t=this.data.title;return this.data.author&&(t+=this.data.author),this.data.first&&this.data.last&&(t+=this.data.first+" "+this.data.last),"⌃ "+t}return this.inline?"⌃ "+this.inline.markdown():""};const k=t=>"| "+(t=t.map((t=>p(t,14)))).join(" | ")+" |";var w=function(t){let e="";if(!this||0===this.length)return e;let n=this.data,a=Object.keys(n[0]),i=a.map((t=>!0===/^col[0-9]/.test(t)?"":t));return e+=k(i)+"\n",e+=k(i.map((()=>"---")))+"\n",e+=n.map((e=>{let n=a.map((n=>e[n]&&e[n].markdown(t)||""));return k(n)})).join("\n"),e+"\n"};return function(t){t.Doc.prototype.markdown=e,t.Section.prototype.markdown=a,t.Paragraph.prototype.markdown=r,t.Sentence.prototype.markdown=l,t.Link.prototype.markdown=c,t.Image.prototype.markdown=h,t.Infobox.prototype.markdown=m,t.Table.prototype.markdown=w,t.List.prototype.markdown=u,t.Reference.prototype.markdown=g}}));
