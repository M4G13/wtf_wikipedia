!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).wtfCategory=e()}(this,(function(){"use strict";function t(t){return t&&Object.prototype.hasOwnProperty.call(t,"default")&&1===Object.keys(t).length?t.default:t}var e=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;return new Promise((function(r,o){if(t&&e)if(0!==t.length)for(var i=[],c=n-1,a=0,u=function n(u){a+=1;var f=e(t[u]);f.then?(f.then((function(t){i[u]=t})),f.catch((function(t){console.error(t),i[u]=null})),f.finally((function(){a-=1,c+=1,t.length>=c+1?n(c):a<=0&&r(i)}))):o("Error: function must return a promise")},f=t.length<n?t.length:n,l=0;l<f;l+=1)u(l);else r([]);else o("Error: missing required parameters to rate-limit function")}))},n={one:function(t,n){return e(t,n,1)},two:function(t,n){return e(t,n,2)},three:function(t,n){return e(t,n,3)},four:function(t,n){return e(t,n,4)},five:function(t,n){return e(t,n,5)},ten:function(t,n){return e(t,n,10)},fifteen:function(t,n){return e(t,n,15)}};n.serial=n.one,n.linear=n.one,n.crawl=n.three,n.walk=n.five,n.run=n.ten,n.sprint=n.fifteen;var r=n;const o={lang:"en",wiki:"wikipedia",domain:null,path:"w/api.php"};const i=t(Object.freeze({__proto__:null,default:r})),c=function(t,e,n){var r;e=e||{},e=Object.assign({},o,e),"string"==typeof t?e.lang=t:(r=t)&&"[object Object]"===Object.prototype.toString.call(r)&&(e=Object.assign(e,t));let i="https://".concat(e.lang,".wikipedia.org/").concat(e.path,"?");return e.domain&&(i="https://".concat(e.domain,"/").concat(e.path,"?")),i+="format=json&action=query&generator=random&grnnamespace=14&prop=revisions&grnlimit=1&origin=*",n(i).then((t=>{try{let e=t.query.pages;return e[Object.keys(e)[0]].title}catch(t){throw t}})).catch((t=>(console.error(t),null)))};return function(t){t.wtf.parseCategory=function(e,n,r){return function(t,e,n,r){return e?t.category(e,n).then((e=>{let n=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n}(e.pages.map((t=>t.title)));return i.three(n,(function(e){return t.fetch(e,r)})).then((t=>({docs:[].concat.apply([],t),categories:e.categories})))})):{docs:[],categories:[]}}(t.wtf,e,n,r)},t.wtf.randomCategory=function(e,n){return c(e,n,t.http)},t.wtf.fetchCategory=t.wtf.parseCategory}}));
