{"version":3,"file":"wtf-plugin-latex.js","sources":["../src/01-doc.js","../src/02-section.js","../src/03-paragraph.js","../src/_lib/smartReplace.js","../src/04-sentence.js","../src/05-link.js","../src/image.js","../src/infobox.js","../src/list.js","../src/reference.js","../src/table.js","../src/index.js"],"sourcesContent":["const defaults = {\n  infoboxes: true,\n  sections: true\n}\n\n// we should try to make this look like the wikipedia does, i guess.\nconst softRedirect = function (doc) {\n  let link = doc.redirectTo()\n  let href = link.page\n  href = './' + href.replace(/ /g, '_')\n  //add anchor\n  if (link.anchor) {\n    href += '#' + link.anchor\n  }\n  return '↳ \\\\href{' + href + '}{' + link.text + '}'\n}\n\n//\nconst toLatex = function (options) {\n  options = Object.assign({}, defaults, options)\n  let out = ''\n  //if it's a redirect page, give it a 'soft landing':\n  if (this.isRedirect() === true) {\n    return softRedirect(this) //end it here.\n  }\n  //render infoboxes (up at the top)\n  if (options.infoboxes === true) {\n    out += this.infoboxes()\n      .map((i) => i.latex(options))\n      .join('\\n')\n  }\n  //render each section\n  if (options.sections === true || options.paragraphs === true || options.sentences === true) {\n    out += this.sections()\n      .map((s) => s.latex(options))\n      .join('\\n')\n  }\n  //default off\n  //render citations\n  if (options.references === true) {\n    out += this.references()\n      .map((c) => c.latex(options))\n      .join('\\n')\n  }\n  return out\n}\nmodule.exports = toLatex\n","const defaults = {\n  headers: true,\n  images: true,\n  tables: true,\n  lists: true,\n  paragraphs: true\n}\n//map '==' depth to 'subsection', 'subsubsection', etc\nconst doSection = function (options) {\n  options = Object.assign({}, defaults, options)\n  let out = ''\n  let num = 1\n\n  //make the header\n  if (options.headers === true && this.title()) {\n    num = 1 + this.depth()\n    let vOpen = '\\n'\n    let vClose = '}'\n    if (num === 1) {\n      vOpen += '\\\\chapter{'\n    } else if (num === 2) {\n      vOpen += '\\\\section{'\n    } else if (num === 3) {\n      vOpen += '\\\\subsection{'\n    } else if (num === 4) {\n      vOpen += '\\\\subsubsection{'\n    } else if (num === 5) {\n      vOpen += '\\\\paragraph{'\n      vClose = '} \\\\\\\\ \\n'\n    } else if (num === 6) {\n      vOpen += '\\\\subparagraph{'\n      vClose = '} \\\\\\\\ \\n'\n    } else {\n      vOpen +=\n        '\\n% section with depth=' + num + ' undefined - use subparagraph instead\\n\\\\subparagraph{'\n      vClose = '} \\\\\\\\ \\n'\n    }\n    out += vOpen + this.title() + vClose\n    out += '\\n'\n  }\n\n  //put any images under the header\n  if (options.images === true && this.images()) {\n    out += this.images()\n      .map((img) => img.latex(options))\n      .join('\\n')\n    //out += '\\n';\n  }\n\n  //make a out table\n  if (options.tables === true && this.tables()) {\n    out += this.tables()\n      .map((t) => t.latex(options))\n      .join('\\n')\n  }\n\n  //make a out bullet-list\n  if (options.lists === true && this.lists()) {\n    out += this.lists()\n      .map((list) => list.latex(options))\n      .join('\\n')\n  }\n\n  //finally, write the sentence text.\n  if (options.paragraphs === true || options.sentences === true) {\n    out += this.paragraphs()\n      .map((s) => s.latex(options))\n      .join(' ')\n    out += '\\n'\n  }\n\n  //let title_tag = ' SECTION depth=' + num + ' - TITLE: ' + section.title + '\\n';\n  //wrap a section comment\n  //out = '\\n% BEGIN' + title_tag + out + '\\n% END' + title_tag;\n  return out\n}\nmodule.exports = doSection\n","const defaults = {\n  sentences: true\n}\n\nconst toLatex = function (options) {\n  options = Object.assign({}, defaults, options)\n  let out = ''\n  if (options.sentences === true) {\n    out += '\\n\\n% BEGIN Paragraph\\n'\n    out += this.sentences().reduce((str, s) => {\n      str += s.latex(options) + '\\n'\n      return str\n    }, '')\n    out += '% END Paragraph'\n  }\n  return out\n}\nmodule.exports = toLatex\n","//escape a string like 'fun*2.Co' for a regExpr\nfunction escapeRegExp(str) {\n  return str.replace(/[\\-[\\]/{}()*+?.\\\\^$|]/g, '\\\\$&')\n}\n\n//sometimes text-replacements can be ambiguous - words used multiple times..\nconst smartReplace = function (all, text, result) {\n  if (!text || !all) {\n    return all\n  }\n\n  if (typeof all === 'number') {\n    all = String(all)\n  }\n  text = escapeRegExp(text)\n  //try a word-boundary replace\n  let reg = new RegExp('\\\\b' + text + '\\\\b')\n  if (reg.test(all) === true) {\n    all = all.replace(reg, result)\n  } else {\n    //otherwise, fall-back to a much messier, dangerous replacement\n    // console.warn('missing \\'' + text + '\\'');\n    all = all.replace(text, result)\n  }\n  return all\n}\n\nmodule.exports = smartReplace\n","const smartReplace = require('./_lib/smartReplace')\n\nconst defaults = {\n  links: true,\n  formatting: true\n}\n// create links, bold, italic in latex\nconst toLatex = function (options) {\n  options = Object.assign({}, defaults, options)\n  let text = this.text()\n  //turn links back into links\n  if (options.links === true && this.links().length > 0) {\n    this.links().forEach((link) => {\n      let tag = link.latex()\n      let str = link.text() || link.page()\n      text = smartReplace(text, str, tag)\n    })\n  }\n  if (options.formatting === true) {\n    if (this.data.fmt) {\n      if (this.data.fmt.bold) {\n        this.data.fmt.bold.forEach((str) => {\n          let tag = '\\\\textbf{' + str + '}'\n          text = smartReplace(text, str, tag)\n        })\n      }\n      if (this.data.fmt.italic) {\n        this.data.fmt.italic.forEach((str) => {\n          let tag = '\\\\textit{' + str + '}'\n          text = smartReplace(text, str, tag)\n        })\n      }\n    }\n  }\n  return text\n}\nmodule.exports = toLatex\n","const toLatex = function () {\n  let href = this.href()\n  href = href.replace(/ /g, '_')\n  let str = this.text() || this.page()\n  return '\\\\href{' + href + '}{' + str + '}'\n}\nmodule.exports = toLatex\n","//\nconst toLatex = function () {\n  let alt = this.alt()\n  let out = '\\\\begin{figure}'\n  out += '\\n\\\\includegraphics[width=\\\\linewidth]{' + this.thumb() + '}'\n  out += '\\n\\\\caption{' + alt + '}'\n  // out += '\\n%\\\\label{fig:myimage1}';\n  out += '\\n\\\\end{figure}'\n  return out\n}\nmodule.exports = toLatex\n","const dontDo = {\n  image: true,\n  caption: true,\n  alt: true,\n  signature: true,\n  'signature alt': true\n}\n\nconst defaults = {\n  images: true\n}\n\n//\nconst infobox = function (options) {\n  options = Object.assign({}, defaults, options)\n  let out = '\\n \\\\vspace*{0.3cm} % Info Box\\n\\n'\n  out += '\\\\begin{tabular}{|@{\\\\qquad}l|p{9.5cm}@{\\\\qquad}|} \\n'\n  out += '  \\\\hline  %horizontal line\\n'\n  //todo: render top image here\n  Object.keys(this.data).forEach((k) => {\n    if (dontDo[k] === true) {\n      return\n    }\n    let s = this.data[k]\n    let val = s.latex(options)\n    out += '  % ---------- \\n'\n    out += '      ' + k + ' & \\n'\n    out += '      ' + val + '\\\\\\\\ \\n'\n    out += '  \\\\hline  %horizontal line\\n'\n  })\n  out += '\\\\end{tabular} \\n'\n  out += '\\n\\\\vspace*{0.3cm}\\n\\n'\n  return out\n}\nmodule.exports = infobox\n","//\nconst toLatex = function (options) {\n  let out = '\\\\begin{itemize}\\n'\n  this.lines().forEach((s) => {\n    out += '  \\\\item ' + s.text(options) + '\\n'\n  })\n  out += '\\\\end{itemize}\\n'\n  return out\n}\nmodule.exports = toLatex\n","//not so impressive right now\nconst toLatex = function () {\n  let str = this.title()\n  return '⌃ ' + str + '\\n'\n}\nmodule.exports = toLatex\n","//create a formal LATEX table\nconst doTable = function (options) {\n  let rows = this.data\n  let out = '\\n%\\\\vspace*{0.3cm}\\n'\n  out +=\n    '\\n% BEGIN TABLE: only left align columns in LaTeX table with horizontal line separation between columns'\n  out +=\n    \"\\n% Format Align Column: 'l'=left 'r'=right align, 'c'=center, 'p{5cm}'=block with column width 5cm \"\n  out += '\\n\\\\begin{tabular}{|'\n  Object.keys(rows[0]).forEach(() => {\n    out += 'l|'\n  })\n  out += '} \\n'\n  out += '\\n  \\\\hline  %horizontal line\\n'\n  //make header\n  out += '\\n  % BEGIN: Table Header'\n  let vSep = '   '\n  Object.keys(rows[0]).forEach((k) => {\n    out += '\\n    ' + vSep\n\n    if (k.indexOf('col-') === 0) {\n      out += '\\\\textbf{' + k + '}'\n    } else {\n      out += '  '\n    }\n    vSep = ' & '\n  })\n  out += '\\\\\\\\ '\n  out += '\\n  % END: Table Header'\n  out += '\\n  % BEGIN: Table Body'\n  out += '\\n  \\\\hline  % ----- table row -----'\n  ////make rows\n  rows.forEach((o) => {\n    vSep = ' '\n    out += '\\n  % ----- table row -----'\n    Object.keys(o).forEach((k) => {\n      let s = o[k]\n      let val = s.latex(options)\n      out += '\\n    ' + vSep + val + ''\n      vSep = ' & '\n    })\n    out += '  \\\\\\\\ ' // newline in latex table = two backslash \\\\\n    out += '\\n  \\\\hline  %horizontal line'\n  })\n  out += '\\n    % END: Table Body'\n  out += '\\\\end{tabular} \\n'\n  out += '\\n\\\\vspace*{0.3cm}\\n\\n'\n  return out\n}\nmodule.exports = doTable\n","const doc = require('./01-doc')\nconst section = require('./02-section')\nconst paragraph = require('./03-paragraph')\nconst sentence = require('./04-sentence')\nconst link = require('./05-link')\nconst image = require('./image')\nconst infobox = require('./infobox')\nconst list = require('./list')\nconst reference = require('./reference')\nconst table = require('./table')\n\nconst plugin = function (models) {\n  models.Doc.prototype.latex = doc\n  models.Section.prototype.latex = section\n  models.Paragraph.prototype.latex = paragraph\n  models.Sentence.prototype.latex = sentence\n  models.Image.prototype.latex = image\n  models.Link.prototype.latex = link\n  models.Image.prototype.latex = image\n  models.Infobox.prototype.latex = infobox\n  models.List.prototype.latex = list\n  models.Reference.prototype.latex = reference\n  models.Table.prototype.latex = table\n}\nmodule.exports = plugin\n"],"names":["defaults","infoboxes","sections","softRedirect","doc","link","redirectTo","href","page","replace","anchor","text","toLatex","options","Object","assign","out","isRedirect","map","i","latex","join","paragraphs","sentences","s","references","c","_01Doc","headers","images","tables","lists","doSection","num","title","depth","vOpen","vClose","img","t","list","_02Section","reduce","str","_03Paragraph","escapeRegExp","smartReplace","all","result","String","reg","RegExp","test","smartReplace_1","require$$0","links","formatting","length","forEach","tag","data","fmt","bold","italic","_04Sentence","_05Link","alt","thumb","image","dontDo","caption","signature","infobox","keys","k","val","infobox_1","lines","reference","doTable","rows","vSep","indexOf","o","table","section","require$$1","paragraph","require$$2","sentence","require$$3","require$$4","require$$5","require$$6","require$$7","require$$8","require$$9","plugin","models","Doc","prototype","Section","Paragraph","Sentence","Image","Link","Infobox","List","Reference","Table","src"],"mappings":"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"}