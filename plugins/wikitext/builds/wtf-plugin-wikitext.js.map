{"version":3,"file":"wtf-plugin-wikitext.js","sources":["../src/01-doc.js","../src/02-section.js","../src/03-paragraph.js","../src/_lib/smartReplace.js","../src/04-sentence.js","../src/05-link.js","../src/image.js","../src/template.js","../src/infobox.js","../src/list.js","../src/reference.js","../src/table.js","../src/index.js"],"sourcesContent":["const defaults = {\n  images: true,\n  tables: true,\n  templates: true,\n  infoboxes: true,\n  categories: true,\n  lists: true,\n  links: true,\n  paragraphs: true\n}\nconst toWiki = function (options) {\n  options = options || {}\n  options = Object.assign({}, defaults, options)\n  let text = ''\n\n  //if it's a redirect page\n  if (this.isRedirect() === true) {\n    return `#REDIRECT [[${this.redirectTo().page}]]`\n  }\n\n  //render infoboxes (up at the top)\n  if (options.infoboxes === true) {\n    text += this.infoboxes()\n      .map((i) => i.makeWikitext(options))\n      .join('\\n')\n  }\n\n  //render each section\n  if (options.sections === true || options.paragraphs === true || options.sentences === true) {\n    let sections = this.sections()\n    text += sections.map((s) => s.makeWikitext(options)).join('\\n')\n  }\n\n  // add categories on the bottom\n  if (options.categories === true) {\n    text += '\\n'\n    this.categories().forEach((cat) => (text += `\\n[[Category: ${cat}]]`))\n  }\n  return text\n}\nmodule.exports = toWiki\n","const defaults = {}\n\nconst doTemplate = function (obj) {\n  let data = ''\n  let name = obj.template\n  Object.keys(obj).forEach((k) => {\n    if (k !== 'template') {\n      data += ` | ${k} = ${obj[k]}`\n    }\n  })\n  return `{{${name}${data}}} `\n}\n\nconst toWiki = function (options) {\n  options = options || {}\n  options = Object.assign({}, defaults, options)\n  let text = ''\n  if (this.title()) {\n    let side = '=='\n    text += `\\n${side} ${this.title()} ${side}\\n`\n  }\n  // render some templates?\n  if (options.templates === true) {\n    this.templates().forEach((tmpl) => {\n      text += doTemplate(tmpl.json()) + '\\n'\n    })\n  }\n\n  //make a table\n  if (options.tables === true) {\n    text += this.tables()\n      .map((t) => t.makeWikitext(options))\n      .join('\\n')\n  }\n\n  // make a html bullet-list\n  if (options.lists === true) {\n    text += this.lists()\n      .map((list) => list.text(options))\n      .join('\\n')\n  }\n  text += this.paragraphs()\n    .map((p) => {\n      return p.makeWikitext(options)\n    })\n    .join('\\n')\n\n  // render references\n  // these will be out of place\n  this.references().forEach((ref) => {\n    text += ref.makeWikitext(options) + '\\n'\n  })\n\n  return text\n}\nmodule.exports = toWiki\n","const defaults = {}\n\nconst toWiki = function (options) {\n  options = options || {}\n  options = Object.assign({}, defaults, options)\n  let text = ''\n\n  // do images\n  this.images().forEach((img) => {\n    text += img.makeWikitext()\n  })\n  // do lists\n  this.lists().forEach((list) => {\n    text += list.makeWikitext()\n  })\n  // render sentences\n  text += this.sentences()\n    .map((s) => {\n      return s.makeWikitext(options)\n    })\n    .join('\\n')\n  return text\n}\nmodule.exports = toWiki\n","//escape a string like 'fun*2.Co' for a regExpr\nfunction escapeRegExp(string) {\n  return string.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&') // $& means the whole matched string\n}\n\n//sometimes text-replacements can be ambiguous - words used multiple times..\nconst smartReplace = function (all, text, result) {\n  if (!text || !all) {\n    return all\n  }\n\n  if (typeof all === 'number') {\n    all = String(all)\n  }\n  text = escapeRegExp(text)\n  //try a word-boundary replace\n  let reg = new RegExp('\\\\b' + text + '\\\\b')\n  if (reg.test(all) === true) {\n    all = all.replace(reg, result)\n  } else {\n    //otherwise, fall-back to a much messier, dangerous replacement\n    // console.warn('missing \\'' + text + '\\'');\n    all = all.replace(text, result)\n  }\n  return all\n}\n\nmodule.exports = smartReplace\n","const smartReplace = require('./_lib/smartReplace')\n\nconst defaults = {\n  links: true\n}\n\nconst toWiki = function (options) {\n  options = options || {}\n  options = Object.assign({}, defaults, options)\n  let text = this.text()\n  if (options.links === true) {\n    this.links().forEach((link) => {\n      let str = link.text() || link.page()\n      let tag = link.makeWikitext()\n      text = smartReplace(text, str, tag)\n    })\n  }\n  if (options.formatting === true) {\n    //support bolds\n    this.bold().forEach((str) => {\n      let tag = '**' + str + '**'\n      text = smartReplace(text, str, tag)\n    })\n    //do italics\n    this.italic().forEach((str) => {\n      let tag = '***' + str + '***'\n      text = smartReplace(text, str, tag)\n    })\n  }\n\n  return text\n}\nmodule.exports = toWiki\n","// add `[text](href)` to the text\nconst toWiki = function () {\n  //if it's an external link, we good\n  if (this.site()) {\n    if (this.text()) {\n      return `[${this.site()}|${this.text()}]`\n    }\n    return `[${this.site()}]`\n  }\n  let page = this.page() || ''\n  if (this.anchor()) {\n    page += `#${this.anchor()}`\n  }\n\n  let str = this.text() || ''\n  if (str && str.toLowerCase() !== page.toLowerCase()) {\n    return `[[${page}|${str}]]`\n  }\n  return `[[${page}]]`\n}\nmodule.exports = toWiki\n","const toWiki = function () {\n  let text = `[[${this.file()}|thumb`\n  let caption = this.data.caption\n  if (caption) {\n    text += `|${this.data.caption.wikitext()}`\n  }\n  return text + ']]'\n}\nmodule.exports = toWiki\n","const toWiki = function () {\n  let text = `{{${this.data.template || ''}`\n  Object.keys(this.data).forEach((k) => {\n    if (k === 'template') {\n      return\n    }\n    let val = this.data[k]\n    if (val) {\n      text += `| ${k} = ${val || ''}`\n    }\n  })\n  text += '}}\\n'\n  return text\n}\nmodule.exports = toWiki\n","const toWiki = function () {\n  let text = `{{Infobox ${this._type || ''}\\n`\n  Object.keys(this.data).forEach((k) => {\n    let val = this.data[k]\n    if (val) {\n      text += `| ${k} = ${val.wikitext() || ''}\\n`\n    }\n  })\n  text += '}}\\n'\n  return text\n}\nmodule.exports = toWiki\n","const toWiki = function () {\n  let txt = ''\n  this.lines().forEach((s) => {\n    txt += `* ${s.wikitext()}\\n`\n  })\n  return txt\n}\nmodule.exports = toWiki\n","const toWiki = function () {\n  if (this.data.inline) {\n    return `<ref>${this.data.inline.wikitext()}</ref>`\n  }\n  let type = this.data.type || 'cite web'\n  let data = ''\n  Object.keys(this.data).forEach((k) => {\n    if (k !== 'template' && k !== 'type') {\n      data += ` | ${k} = ${this.data[k]}`\n    }\n  })\n  return `<ref>{{${type}${data}}}</ref>`\n}\nmodule.exports = toWiki\n","const toWiki = function (options) {\n  let rows = this.data\n  let wiki = `{| class=\"wikitable\"\\n`\n\n  // draw headers\n  let headers = Object.keys(rows[0])\n  headers = headers.filter((k) => /^col[0-9]/.test(k) !== true)\n  if (headers.length > 0) {\n    wiki += '|-\\n'\n    headers.forEach((k) => {\n      wiki += '! ' + k + '\\n'\n    })\n  }\n  //make rows\n  rows.forEach((o) => {\n    wiki += '|-\\n'\n    Object.keys(o).forEach((k) => {\n      let val = o[k].wikitext(options)\n      wiki += '| ' + val + '\\n'\n    })\n  })\n  wiki += `|}`\n  return wiki\n}\nmodule.exports = toWiki\n","const doc = require('./01-doc')\nconst section = require('./02-section')\nconst paragraph = require('./03-paragraph')\nconst sentence = require('./04-sentence')\nconst link = require('./05-link')\nconst image = require('./image')\nconst template = require('./template')\nconst infobox = require('./infobox')\nconst list = require('./list')\nconst reference = require('./reference')\nconst table = require('./table')\n\nconst plugin = function (models) {\n  models.Doc.prototype.makeWikitext = doc\n  models.Section.prototype.makeWikitext = section\n  models.Paragraph.prototype.makeWikitext = paragraph\n  models.Sentence.prototype.makeWikitext = sentence\n  models.Link.prototype.makeWikitext = link\n  models.Image.prototype.makeWikitext = image\n  models.Infobox.prototype.makeWikitext = infobox\n  models.Template.prototype.makeWikitext = template\n  models.Table.prototype.makeWikitext = table\n  models.List.prototype.makeWikitext = list\n  models.Reference.prototype.makeWikitext = reference\n}\nmodule.exports = plugin\n"],"names":["defaults","images","tables","templates","infoboxes","categories","lists","links","paragraphs","toWiki","options","Object","assign","text","isRedirect","redirectTo","page","map","i","makeWikitext","join","sections","sentences","s","forEach","cat","_01Doc","doTemplate","obj","data","name","template","keys","k","title","side","tmpl","json","t","list","p","references","ref","_02Section","img","_03Paragraph","escapeRegExp","string","replace","smartReplace","all","result","String","reg","RegExp","test","smartReplace_1","require$$0","link","str","tag","formatting","bold","italic","_04Sentence","site","anchor","toLowerCase","_05Link","file","caption","wikitext","image","val","_type","infobox","txt","lines","inline","type","reference","rows","wiki","headers","filter","length","o","table","doc","section","require$$1","paragraph","require$$2","sentence","require$$3","require$$4","require$$5","require$$6","require$$7","require$$8","require$$9","require$$10","plugin","models","Doc","prototype","Section","Paragraph","Sentence","Link","Image","Infobox","Template","Table","List","Reference","src"],"mappings":"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"}