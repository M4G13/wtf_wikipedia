!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).wtfWikitext=e()}(this,(function(){"use strict";const t={images:!0,tables:!0,templates:!0,infoboxes:!0,categories:!0,lists:!0,links:!0,paragraphs:!0};const e={};const i={};const n=function(t,e,i){if(!e||!t)return t;"number"==typeof t&&(t=String(t)),e=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");let n=new RegExp("\\b"+e+"\\b");return t=!0===n.test(t)?t.replace(n,i):t.replace(e,i)},a={links:!0};const o=function(e){e=e||{},e=Object.assign({},t,e);let i="";if(!0===this.isRedirect())return"#REDIRECT [[".concat(this.redirectTo().page,"]]");if(!0===e.infoboxes&&(i+=this.infoboxes().map((t=>t.makeWikitext(e))).join("\n")),!0===e.sections||!0===e.paragraphs||!0===e.sentences){let t=this.sections();i+=t.map((t=>t.makeWikitext(e))).join("\n")}return!0===e.categories&&(i+="\n",this.categories().forEach((t=>i+="\n[[Category: ".concat(t,"]]")))),i},c=function(t){t=t||{},t=Object.assign({},e,t);let i="";if(this.title()){let t="==";i+="\n".concat(t," ").concat(this.title()," ").concat(t,"\n")}return!0===t.templates&&this.templates().forEach((t=>{i+=function(t){let e="",i=t.template;return Object.keys(t).forEach((i=>{"template"!==i&&(e+=" | ".concat(i," = ").concat(t[i]))})),"{{".concat(i).concat(e,"}} ")}(t.json())+"\n"})),!0===t.tables&&(i+=this.tables().map((e=>e.makeWikitext(t))).join("\n")),!0===t.lists&&(i+=this.lists().map((e=>e.text(t))).join("\n")),i+=this.paragraphs().map((e=>e.makeWikitext(t))).join("\n"),this.references().forEach((e=>{i+=e.makeWikitext(t)+"\n"})),i},s=function(t){t=t||{},t=Object.assign({},i,t);let e="";return this.images().forEach((t=>{e+=t.makeWikitext()})),this.lists().forEach((t=>{e+=t.makeWikitext()})),e+=this.sentences().map((e=>e.makeWikitext(t))).join("\n"),e},r=function(t){t=t||{},t=Object.assign({},a,t);let e=this.text();return!0===t.links&&this.links().forEach((t=>{let i=t.text()||t.page(),a=t.makeWikitext();e=n(e,i,a)})),!0===t.formatting&&(this.bold().forEach((t=>{e=n(e,t,"**"+t+"**")})),this.italic().forEach((t=>{e=n(e,t,"***"+t+"***")}))),e},h=function(){if(this.site())return this.text()?"[".concat(this.site(),"|").concat(this.text(),"]"):"[".concat(this.site(),"]");let t=this.page()||"";this.anchor()&&(t+="#".concat(this.anchor()));let e=this.text()||"";return e&&e.toLowerCase()!==t.toLowerCase()?"[[".concat(t,"|").concat(e,"]]"):"[[".concat(t,"]]")},f=function(){let t="[[".concat(this.file(),"|thumb");return this.data.caption&&(t+="|".concat(this.data.caption.wikitext())),t+"]]"},l=function(){let t="{{".concat(this.data.template||"");return Object.keys(this.data).forEach((e=>{if("template"===e)return;let i=this.data[e];i&&(t+="| ".concat(e," = ").concat(i||""))})),t+="}}\n",t},p=function(){let t="{{Infobox ".concat(this._type||"","\n");return Object.keys(this.data).forEach((e=>{let i=this.data[e];i&&(t+="| ".concat(e," = ").concat(i.wikitext()||"","\n"))})),t+="}}\n",t},k=function(){let t="";return this.lines().forEach((e=>{t+="* ".concat(e.wikitext(),"\n")})),t},m=function(){if(this.data.inline)return"<ref>".concat(this.data.inline.wikitext(),"</ref>");let t=this.data.type||"cite web",e="";return Object.keys(this.data).forEach((t=>{"template"!==t&&"type"!==t&&(e+=" | ".concat(t," = ").concat(this.data[t]))})),"<ref>{{".concat(t).concat(e,"}}</ref>")},u=function(t){let e=this.data,i='{| class="wikitable"\n',n=Object.keys(e[0]);return n=n.filter((t=>!0!==/^col[0-9]/.test(t))),n.length>0&&(i+="|-\n",n.forEach((t=>{i+="! "+t+"\n"}))),e.forEach((e=>{i+="|-\n",Object.keys(e).forEach((n=>{let a=e[n].wikitext(t);i+="| "+a+"\n"}))})),i+="|}",i};return function(t){t.Doc.prototype.makeWikitext=o,t.Section.prototype.makeWikitext=c,t.Paragraph.prototype.makeWikitext=s,t.Sentence.prototype.makeWikitext=r,t.Link.prototype.makeWikitext=h,t.Image.prototype.makeWikitext=f,t.Infobox.prototype.makeWikitext=p,t.Template.prototype.makeWikitext=l,t.Table.prototype.makeWikitext=u,t.List.prototype.makeWikitext=k,t.Reference.prototype.makeWikitext=m}}));
