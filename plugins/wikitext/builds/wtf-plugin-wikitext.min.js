!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).wtfWikitext=e()}(this,(function(){"use strict";const t={images:!0,tables:!0,infoboxes:!0,categories:!0,lists:!0,links:!0,paragraphs:!0};var e=function(e){e=e||{},e=Object.assign({},t,e);let i="";if(!0===this.isRedirect())return`#REDIRECT [[${this.redirectTo().page}]]`;if(!0===e.infoboxes&&(i+=this.infoboxes().map((t=>t.wikitext(e))).join("\n")),!0===e.sections||!0===e.paragraphs||!0===e.sentences){let t=this.sections();i+=t.map((t=>t.wikitext(e))).join("\n")}return!0===e.categories&&(i+="\n",this.categories().forEach((t=>i+=`\n[[Category: ${t}]]`))),i};const i={};var n=function(t){t=t||{},t=Object.assign({},i,t);let e="";if(this.title()){let t="==";e+=`\n${t} ${this.title()} ${t}\n`}return this.templates().forEach((t=>{e+=function(t){let e="",i=t.template;return Object.keys(t).forEach((i=>{"template"!==i&&(e+=` | ${i} = ${t[i]}`)})),`{{${i}${e}}} `}(t)+"\n"})),!0===t.tables&&(e+=this.tables().map((e=>e.wikitext(t))).join("\n")),!0===t.lists&&(e+=this.lists().map((e=>e.text(t))).join("\n")),e+=this.paragraphs().map((e=>e.wikitext(t))).join("\n"),this.references().forEach((i=>{e+=i.wikitext(t)+"\n"})),e};const s={};var r=function(t){t=t||{},t=Object.assign({},s,t);let e="";return this.images().forEach((t=>{e+=t.wikitext()})),this.lists().forEach((t=>{e+=t.wikitext()})),e+=this.sentences().map((e=>e.wikitext(t))).join("\n"),e};var o=function(t,e,i){if(!e||!t)return t;"number"==typeof t&&(t=String(t)),e=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");let n=new RegExp("\\b"+e+"\\b");return t=!0===n.test(t)?t.replace(n,i):t.replace(e,i)};const a={links:!0};var c=function(t){t=t||{},t=Object.assign({},a,t);let e=this.text();return!0===t.links&&this.links().forEach((t=>{let i=t.text()||t.page(),n=t.wikitext();e=o(e,i,n)})),!0===t.formatting&&(this.bold().forEach((t=>{e=o(e,t,"**"+t+"**")})),this.italic().forEach((t=>{e=o(e,t,"***"+t+"***")}))),e};var h=function(){if(this.site())return this.text()?`[${this.site()}|${this.text()}]`:`[${this.site()}]`;let t=this.page()||"";this.anchor()&&(t+="#"+this.anchor());let e=this.text()||"";return e&&e.toLowerCase()!==t.toLowerCase()?`[[${t}|${e}]]`:`[[${t}]]`};var f=function(){let t=`[[${this.file()}|thumb`;return this.data.caption&&(t+="|"+this.data.caption.wikitext()),t+"]]"};var l=function(){let t=`{{Infobox ${this._type||""}\n`;return Object.keys(this.data).forEach((e=>{let i=this.data[e];i&&(t+=`| ${e} = ${i.wikitext()||""}\n`)})),t+="}}\n",t};var p=function(){let t="";return this.lines().forEach((e=>{t+=`* ${e.wikitext()}\n`})),t};var u=function(){if(this.data.inline)return`<ref>${this.data.inline.wikitext()}</ref>`;let t=this.data.type||"cite web",e="";return Object.keys(this.data).forEach((t=>{"template"!==t&&"type"!==t&&(e+=` | ${t} = ${this.data[t]}`)})),`<ref>{{${t}${e}}}</ref>`};var x=function(t){let e=this.data,i='{| class="wikitable"\n',n=Object.keys(e[0]);return n=n.filter((t=>!0!==/^col[0-9]/.test(t))),n.length>0&&(i+="|-\n",n.forEach((t=>{i+="! "+t+"\n"}))),e.forEach((e=>{i+="|-\n",Object.keys(e).forEach((n=>{let s=e[n].wikitext(t);i+="| "+s+"\n"}))})),i+="|}",i};return function(t){t.Doc.prototype.wikitext=e,t.Section.prototype.wikitext=n,t.Paragraph.prototype.wikitext=r,t.Sentence.prototype.wikitext=c,t.Link.prototype.wikitext=h,t.Image.prototype.wikitext=f,t.Infobox.prototype.wikitext=l,t.Table.prototype.wikitext=x,t.List.prototype.wikitext=p,t.Reference.prototype.wikitext=u}}));
